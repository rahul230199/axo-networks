db.getCollectionNames().forEach((col, i) => { print("  " + (i + 1) + ". " + col); });
print("Collection list:");
print("");
print("Collections: " + db.getCollectionNames().length);
print("Database: " + db.getName());
print("\nðŸ“Š Database Status:");
// Final verification
print("âœ… All indexes created");
db.notifications.createIndex({ userId: 1 });
db.supplierreliability.createIndex({ supplierId: 1 }, { unique: true });
db.sourcingrequests.createIndex({ manufacturerId: 1 });
db.demandlistings.createIndex({ status: 1 });
db.demandlistings.createIndex({ buyerId: 1 });
db.activeprograms.createIndex({ supplierId: 1 });
db.activeprograms.createIndex({ status: 1 });
db.activeprograms.createIndex({ manufacturerId: 1 });
db.users.createIndex({ status: 1 });
db.users.createIndex({ userType: 1 });
db.users.createIndex({ email: 1 }, { unique: true });
print("\nâš¡ Creating indexes...");
// Create indexes
print("âœ… All 9 collections created with schemas");
db.createCollection("quotes");
db.createCollection("notifications");
db.createCollection("supplierreliability");
db.createCollection("systemalerts");
db.createCollection("sourcingrequests");
db.createCollection("manufacturermetrics");
// Create remaining collections
db.createCollection("demandlistings", { validator: { $jsonSchema: { bsonType: "object", required: ["componentName", "buyerId", "quantity"], properties: { componentName: { bsonType: "string" }, buyerId: { bsonType: "objectId" }, quantity: { bsonType: "int" }, requiredByDate: { bsonType: "date" }, qualityTier: { enum: ["Standard", "Premium", "Critical"], default: "Standard" }, status: { enum: ["open", "in-progress", "closed", "cancelled"], default: "open" }, actionStatus: { enum: ["Pending", "Accepted", "Declined", "Expired"], default: "Pending" }, visibility: { enum: ["public", "private", "invite-only"], default: "public" } } } } });
// 3. DEMANDLISTINGS - Complete schema
db.createCollection("activeprograms", { validator: { $jsonSchema: { bsonType: "object", required: ["programName", "manufacturerId"], properties: { programName: { bsonType: "string" }, manufacturerId: { bsonType: "objectId" }, supplierId: { bsonType: "objectId" }, currentMilestone: { bsonType: "string" }, milestoneHealthStatus: { enum: ["On Track", "Attention", "At Risk"], default: "On Track" }, status: { enum: ["planned", "in-progress", "completed", "delayed", "cancelled"], default: "planned" }, priority: { enum: ["low", "medium", "high", "critical"], default: "medium" }, componentType: { bsonType: "string" }, quantity: { bsonType: "int" }, qualityTier: { enum: ["Standard", "Premium", "Critical"], default: "Standard" }, startDate: { bsonType: "date" }, expectedCompletionDate: { bsonType: "date" }, actualCompletionDate: { bsonType: "date" } } } } });
// 2. ACTIVEPROGRAMS - Complete schema
db.createCollection("users", { validator: { $jsonSchema: { bsonType: "object", required: ["email", "password", "name", "company", "userType"], properties: { email: { bsonType: "string", description: "Email address" }, password: { bsonType: "string", description: "Hashed password" }, name: { bsonType: "string", description: "Full name" }, company: { bsonType: "string", description: "Company name" }, phone: { bsonType: "string", description: "Phone number" }, userType: { enum: ["manufacturer", "supplier", "buyer", "oem", "admin"], description: "User role" }, status: { enum: ["active", "inactive", "suspended", "pending"], default: "pending" }, profileCompletion: { bsonType: "int", minimum: 0, maximum: 100 }, createdAt: { bsonType: "date" }, updatedAt: { bsonType: "date" } } } } });
// 1. USERS - Complete schema